function createGrid(){function k(a,b){function c(a,b){var c=a.width(),d=a.height(),e=a.offset(),f=(b.pageX-e.left-c/2)*(c>d?d/c:1),g=(b.pageY-e.top-d/2)*(d>c?c/d:1),h=Math.round((Math.atan2(g,f)*(180/Math.PI)+180)/90+3)%4;switch(h){case 0:return"top";case 1:return"right";case 2:return"bottom";case 3:return"left"}}var d=c(a,b);"left"===d?a.css("border-left-color",l):"right"===d?a.css("border-right-color",l):"top"===d?a.css("border-top-color",l):"bottom"===d&&a.css("border-bottom-color",l);var e=a.css("border-top-color"),f=a.css("border-left-color"),g=a.css("border-right-color"),h=a.css("border-bottom-color");e!==l&&"rgb(0, 0, 0)"!==e&&a.css("border-top-color","rgb(0, 0, 0)"),f!==l&&"rgb(0, 0, 0)"!==f&&a.css("border-left-color","rgb(0, 0, 0)"),g!==l&&"rgb(0, 0, 0)"!==g&&a.css("border-right-color","rgb(0, 0, 0)"),h!==l&&"rgb(0, 0, 0)"!==h&&a.css("border-bottom-color","rgb(0, 0, 0)")}$(".pokemonlink").children().remove(),pokelink||(pokelink={dimension:"1x1",locations:[]});for(var a="<table>",b=pokelink.dimension.split("x").map(Number),c=0,d=b[0];c<d;c++){a+="<tr>";for(var e=0,f=b[1];e<f;e++){for(var g=null,h=0,i=pokelink.locations.length;h<i;h++){var j=pokelink.locations[h];(j.row===c&&j.col===e||j.row2===c&&j.col2===e)&&(g=j)}g?(a+='<td class="pokelink-click static" style="background-color: #'+g.color+';">',a+='<img src="http://www.smogon.com/articles/images/'+g.img+'.png" />'):a+='<td class="pokelink-click">',a+="</td>"}a+="</tr>"}a+="</table>",a+='<button class="pokelink-reset" onclick="createGrid()">Reset Puzzle</button>',$(".pokemonlink").append(a);var l=null;$(".static").each(function(){this.static=!0}),$(".pokelink-click").mousedown(function(a){a.preventDefault(),a.stopPropagation(),l=this.style.backgroundColor}),$("body").mouseup(function(){l=null}),$(".pokelink-click").mouseenter(function(a){!l||this.static&&l!==this.style.backgroundColor||(k($(this),a),this.static||(this.style.backgroundColor=l))}),$(".pokelink-click").mouseleave(function(a){!l||this.static&&l!==this.style.backgroundColor||k($(this),a)}),$(".pokelink-click").click(function(){this.style.border="2px solid black",this.static||(this.style.backgroundColor="")})}createGrid();