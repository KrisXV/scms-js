window.pkmn=window.pkmn||{};window.pkmn.sets=(()=>{var I=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var J=Object.prototype.hasOwnProperty;var _=(e,t)=>{for(var n in t)I(e,n,{get:t[n],enumerable:!0})},$=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of C(t))!J.call(e,i)&&i!==n&&I(e,i,{get:()=>t[i],enumerable:!(r=F(t,i))||r.enumerable});return e};var z=e=>$(I({},"__esModule",{value:!0}),e);var K={};_(K,{Sets:()=>S,Team:()=>v,Teams:()=>h});function x(e){return typeof e!="string"&&typeof e!="number"?"":(""+e).toLowerCase().replace(/[^a-z0-9]+/g,"")}var O={hp:"HP",atk:"Atk",def:"Def",spa:"SpA",spd:"SpD",spe:"Spe"},y=Object.keys(O),L={HP:"hp",hp:"hp",Attack:"atk",Atk:"atk",atk:"atk",Defense:"def",Def:"def",def:"def","Special Attack":"spa",SpA:"spa",SAtk:"spa",SpAtk:"spa",spa:"spa",Special:"spa",spc:"spa",Spc:"spa","Special Defense":"spd",SpD:"spd",SDef:"spd",SpDef:"spd",spd:"spd",Speed:"spe",Spe:"spe",Spd:"spe",spe:"spe"},S=new class{pack(e){return S.packSet(e)}packSet(e){let t="";t+=e.name||e.species;let n=P(e.species);t+="|"+(P(e.name||e.species)===n?"":n),t+="|"+P(e.item),t+="|"+(P(e.ability)||"-");let r="";if(t+="|",e.moves)for(let s=0;s<e.moves.length;s++){let f=P(e.moves[s]);s&&!f||(t+=(s?",":"")+f,f.substr(0,11)==="HiddenPower"&&f.length>11&&(r=f.slice(11)))}t+="|"+(e.nature||"");let i="|";e.evs&&(i="|"+(e.evs.hp||"")+","+(e.evs.atk||"")+","+(e.evs.def||"")+","+(e.evs.spa||"")+","+(e.evs.spd||"")+","+(e.evs.spe||"")),i==="|,,,,,"?t+="|":t+=i,e.gender?t+="|"+e.gender:t+="|";let a=s=>!("ivs"in e)||e.ivs[s]===31||e.ivs[s]===void 0?"":e.ivs[s].toString(),o="|";e.ivs&&(o="|"+a("hp")+","+a("atk")+","+a("def")+","+a("spa")+","+a("spd")+","+a("spe")),o==="|,,,,,"?t+="|":t+=o,e.shiny?t+="|S":t+="|",e.level&&e.level!==100?t+="|"+e.level:t+="|",e.happiness!==void 0&&e.happiness!==255?t+="|"+e.happiness:t+="|";let p=e.dynamaxLevel!==void 0&&e.dynamaxLevel!==10;return(e.pokeball||e.hpType&&!r||e.gigantamax||p||e.teraType)&&(t+=","+(e.hpType||""),t+=","+P(e.pokeball||""),t+=","+(e.gigantamax?"G":""),t+=","+(p?e.dynamaxLevel:""),t+=","+(e.teraType||"")),t}exportSet(e,t){var a,o,p,s,f,u,d;let n="",r=e.species||e.name||"";if(r=((a=t==null?void 0:t.species.get(r))==null?void 0:a.name)||r,e.name&&e.name!==r?n+=""+e.name+" ("+r+")":n+=""+r,(!t||t.gen>=2)&&(e.gender==="M"&&(n+=" (M)"),e.gender==="F"&&(n+=" (F)")),e.item){let m=(p=(o=t==null?void 0:t.items.get(e.item))==null?void 0:o.name)!=null?p:e.item;n+=" @ "+m}if(n+=`  
`,e.ability&&(!t||(t==null?void 0:t.gen)>=3)){let m=(f=(s=t==null?void 0:t.abilities.get(e.ability))==null?void 0:s.name)!=null?f:e.ability;n+="Ability: "+m+`  
`}e.level&&e.level!==100&&(n+="Level: "+e.level+`  
`),e.shiny&&(!t||t.gen>=2)&&(n+=`Shiny: Yes  
`),typeof e.happiness=="number"&&e.happiness!==255&&!isNaN(e.happiness)&&(!t||t.gen>=2)&&(n+="Happiness: "+e.happiness+`  
`),e.pokeball&&(n+="Pokeball: "+e.pokeball+`  
`),e.hpType&&(n+="Hidden Power: "+e.hpType+`  
`),typeof e.dynamaxLevel=="number"&&e.dynamaxLevel!==10&&!isNaN(e.dynamaxLevel)&&(n+="Dynamax Level: "+e.dynamaxLevel+`  
`),e.gigantamax&&(n+=`Gigantamax: Yes  
`),e.teraType&&(n+="Tera Type: "+e.teraType+`  
`);let i=!0;if(e.evs&&(!t||t.gen>=3))for(let m of y)e.evs[m]&&(i?(n+="EVs: ",i=!1):n+=" / ",n+=""+e.evs[m]+" "+O[m]);if(i||(n+=`  
`),e.nature&&(!t||t.gen>=3)&&(n+=""+e.nature+` Nature  
`),i=!0,e.ivs){let m=!0,g;if(e.moves){for(let l of e.moves)if(g=V(l),g){let c=M(g,t);if(!c)continue;for(let b of y)if((e.ivs[b]===void 0?31:e.ivs[b])!==(c[b]||31)){m=!1;break}}}if(m&&!g){for(let l of y)if(e.ivs[l]!==31&&e.ivs[l]!==void 0){m=!1;break}}if(!m)for(let l of y)typeof e.ivs[l]=="undefined"||isNaN(e.ivs[l])||e.ivs[l]===31||(i?(n+="IVs: ",i=!1):n+=" / ",n+=""+e.ivs[l]+" "+O[l])}if(i||(n+=`  
`),e.moves)for(let m of e.moves)m&&(m=(d=(u=t==null?void 0:t.moves.get(m))==null?void 0:u.name)!=null?d:m,n+="- "+W(m)+`  
`);return n+=`
`,n}unpack(e,t){return S.unpackSet(e,t)}unpackSet(e,t){return w(e,0,0,t).set}importSet(e,t){return A(e.split(`
`),0,t).set}toJSON(e){return JSON.stringify(e)}fromJSON(e){if(!(!e.startsWith("{")||!e.endsWith("}")))return JSON.parse(e)}toString(e,t){return S.exportSet(e,t)}fromString(e){return S.importSet(e)}canonicalize(e,t){var d,m,g;let n=t.species.get(e.species);e.species=x(n.battleOnly?n.baseSpecies:n.name),e.name=e.species,e.item=t.gen>=2&&e.item?x(e.item):void 0,e.ability=t.gen>=3?x(e.ability?e.ability:n.abilities[0]):void 0,e.gender=t.gen>=2&&e.gender!==n.gender?e.gender:void 0,e.level=e.level||100;let r=!0;if(!e.ivs)e.ivs={hp:31,atk:31,def:31,spa:31,spd:31,spe:31};else for(let l of y)e.ivs[l]=(d=e.ivs[l])!=null?d:31,t.gen<3&&(e.ivs[l]=N(D(e.ivs[l]))),e.ivs[l]!==31&&(r=!1);let i=t.gen<3?t.natures.get(e.nature||"serious"):void 0;e.nature=i&&x(i.name);let a=e.hpType,o="",p=!1,s=[];for(let l of e.moves){let c=x(l);if(c==="return"||c==="frustration")o=c;else if(c==="swordsdance")p=!0;else if(c.startsWith("hiddenpower"))if(c==="hiddenpower"){let b=e.hpType||B(t.gen,e.ivs).type;c=`${c}${b}`}else a=c.substr(11,1).toUpperCase()+c.substr(12);s.push(c)}e.moves=s.sort((l,c)=>l.localeCompare(c));let f=t.species.get(e.species).baseStats;e.evs=e.evs||{};for(let l of y)if(t.gen<3)e.evs[l]=(m=e.evs[l])!=null?m:252;else if(!e.evs[l])e.evs[l]=0;else{let c=q(t.gen,l,f[l],e.ivs[l],e.evs[l],e.level,i);if(l==="hp")e.evs[l]=f[l]===1?0:Math.max(0,(Math.ceil((c-e.level-10)*100/e.level)-2*f[l]-e.ivs[l])*4);else{let b=i?i.plus===l?1.1:i.minus===l?.9:1:1;e.evs[l]=Math.max(0,(Math.ceil((Math.ceil(c/b)-5)*100/e.level)-2*f[l]-e.ivs[l])*4)}}if(t.gen===2&&e.species==="marowak"&&e.item==="thickclub"&&p&&e.level===100){let l=Math.floor(e.ivs.atk/2)*2;for(;e.evs.atk>0&&2*80+l+Math.floor(e.evs.atk/4)+5>255;)e.evs.atk-=4}let u=t.gen>=7&&e.level===100;if(a&&r){let l=t.gen===2?H[a].dvs:H[a].ivs;for(let c of y)t.gen===2?e.ivs[c]=c in l?N(l[c]):31:u||(e.ivs[c]=(g=l[c])!=null?g:31);t.gen===2&&(e.ivs.hp=N(X(e.ivs)))}return e.hpType=a&&u?a:void 0,o==="return"?e.happiness=255:o==="frustration"?e.happiness=0:e.happiness=void 0,e.shiny=t.gen>=2&&e.shiny?e.shiny:void 0,e.pokeball=void 0,e.dynamaxLevel=t.gen===8?e.dynamaxLevel:void 0,e.gigantamax=t.gen===8&&e.gigantamax?e.gigantamax:void 0,e.teraType=t.gen===9?e.teraType:void 0,e}},U=["","0","1","H","S"];function w(e,t=0,n=0,r){let i={};if(n=e.indexOf("|",t),n<0)return{i:t,j:n};if(i.name=e.substring(t,n),t=n+1,n=e.indexOf("|",t),n<0)return{i:t,j:n};if(i.species=T(e.substring(t,n),r==null?void 0:r.species)||i.name,t=n+1,n=e.indexOf("|",t),n<0)return{i:t,j:n};if(i.item=T(e.substring(t,n),r==null?void 0:r.items),t=n+1,n=e.indexOf("|",t),n<0)return{i:t,j:n};let a=T(e.substring(t,n),r==null?void 0:r.abilities);if(a==="-")a="";else if(U.includes(a)){if(r){let p=r.species.get(i.species);(p==null?void 0:p.baseSpecies)==="Zygarde"&&a==="H"?a="Power Construct":p!=null&&p.abilities&&(a=p.abilities[a||"0"])}if(a!==""&&!a)return{i:t,j:n}}if(i.ability=a,t=n+1,n=e.indexOf("|",t),n<0)return{i:t,j:n};if(i.moves=e.substring(t,n).split(",",24).filter(p=>p).map(p=>T(p,r==null?void 0:r.moves)),t=n+1,n=e.indexOf("|",t),n<0)return{i:t,j:n};if(i.nature=T(e.substring(t,n),r==null?void 0:r.natures),t=n+1,n=e.indexOf("|",t),n<0)return{i:t,j:n};if(i.evs={hp:0,atk:0,def:0,spa:0,spd:0,spe:0},n!==t){let p=e.substring(t,n);if(p.length>5){let s=p.split(",");i.evs.hp=Number(s[0])||i.evs.hp,i.evs.atk=Number(s[1])||i.evs.atk,i.evs.def=Number(s[2])||i.evs.def,i.evs.spa=Number(s[3])||i.evs.spa,i.evs.spd=Number(s[4])||i.evs.spd,i.evs.spe=Number(s[5])||i.evs.spe}}if(t=n+1,n=e.indexOf("|",t),n<0)return{i:t,j:n};if(t!==n&&(i.gender=e.substring(t,n)),t=n+1,n=e.indexOf("|",t),n<0)return{i:t,j:n};if(i.ivs={hp:31,atk:31,def:31,spa:31,spd:31,spe:31},n!==t){let p=e.substring(t,n).split(",",6);i.ivs.hp=p[0]===""?31:Number(p[0])||0,i.ivs.atk=p[1]===""?31:Number(p[1])||0,i.ivs.def=p[2]===""?31:Number(p[2])||0,i.ivs.spa=p[3]===""?31:Number(p[3])||0,i.ivs.spd=p[4]===""?31:Number(p[4])||0,i.ivs.spe=p[5]===""?31:Number(p[5])||0}if(t=n+1,n=e.indexOf("|",t),n<0)return{i:t,j:n};if(t!==n&&(i.shiny=!0),t=n+1,n=e.indexOf("|",t),n<0)return{i:t,j:n};t!==n&&(i.level=parseInt(e.substring(t,n))),t=n+1,n=e.indexOf("]",t);let o;return n<0?t<e.length&&(o=e.substring(t).split(",",6)):t!==n&&(o=e.substring(t,n).split(",",6)),o&&(i.happiness=o[0]?Number(o[0]):255,i.hpType=o[1]||"",i.pokeball=T(o[2]||"",r==null?void 0:r.items),i.gigantamax=!!o[3],i.dynamaxLevel=o[4]?Number(o[4]):10,i.teraType=o[5]||""),{set:i,i:t,j:n}}var Y=/^[A-Za-z]+ (N|n)ature/;function A(e,t=0,n){var i,a,o,p;let r;for(;t<e.length;t++){let s=e[t].trim();if(s===""||s==="---"||s.substr(0,3)==="==="||s.includes("|"))return{set:r,line:t};if(r){if(s.substr(0,7)==="Trait: ")s=s.substr(7),r.ability=s;else if(s.substr(0,9)==="Ability: ")s=s.substr(9),r.ability=s;else if(s==="Shiny: Yes")r.shiny=!0;else if(s.substr(0,7)==="Level: ")s=s.substr(7),r.level=+s;else if(s.substr(0,11)==="Happiness: ")s=s.substr(11),r.happiness=+s;else if(s.substr(0,10)==="Pokeball: ")s=s.substr(10),r.pokeball=s;else if(s.substr(0,14)==="Hidden Power: ")s=s.substr(14),r.hpType=s;else if(s.substr(0,11)==="Tera Type: ")s=s.substr(11),r.teraType=s;else if(s.substr(0,15)==="Dynamax Level: ")s=s.substr(15),r.dynamaxLevel=+s;else if(s==="Gigantamax: Yes")r.gigantamax=!0;else if(s.substr(0,5)==="EVs: "){s=s.substr(5);let f=s.split(" / ");r.evs={hp:0,atk:0,def:0,spa:0,spd:0,spe:0};for(let u of f){let d=u.indexOf(" ");if(d===-1)continue;let m=L[u.substr(d+1)],g=parseInt(u.substr(0,d));m&&(r.evs[m]=g)}}else if(s.substr(0,5)==="IVs: "){s=s.substr(5);let f=s.split(" / ");r.ivs={hp:31,atk:31,def:31,spa:31,spd:31,spe:31};for(let u of f){let d=u.indexOf(" ");if(d===-1)continue;let m=L[u.substr(d+1)],g=parseInt(u.substr(0,d));m&&(isNaN(g)&&(g=31),r.ivs[m]=g)}}else if(Y.exec(s)){let f=s.indexOf(" Nature");f===-1&&(f=s.indexOf(" nature")),s=s.substr(0,f),s!=="undefined"&&(r.nature=s)}else if(s.substr(0,1)==="-"||s.substr(0,1)==="~"){s=s.substr(1),s.substr(0,1)===" "&&(s=s.substr(1)),r.moves||(r.moves=[]);let f=V(s);if(f){s="Hidden Power "+f.toString();let u=M(f,n);if(!r.ivs&&u){r.ivs={hp:31,atk:31,def:31,spa:31,spd:31,spe:31};let d;for(d in u)r.ivs[d]=u[d]}}s==="Frustration"&&r.happiness===void 0&&(r.happiness=0),r.moves.push(s)}}else{r={name:"",species:"",gender:""};let f=s.lastIndexOf(" @ ");f!==-1&&(r.item=s.substr(f+3),x(r.item)==="noitem"&&(r.item=""),s=s.substr(0,f)),s.substr(s.length-4)===" (M)"&&(r.gender="M",s=s.substr(0,s.length-4)),s.substr(s.length-4)===" (F)"&&(r.gender="F",s=s.substr(0,s.length-4));let u=s.lastIndexOf(" (");if(s.substr(s.length-1)===")"&&u!==-1){s=s.substr(0,s.length-1);let d=s.substr(u+2);r.species=(a=(i=n==null?void 0:n.species.get(d))==null?void 0:i.name)!=null?a:d,s=s.substr(0,u),r.name=s}else r.species=(p=(o=n==null?void 0:n.species.get(s))==null?void 0:o.name)!=null?p:s,r.name=""}}return{set:r,line:t+1}}function V(e){if(e.substr(0,14)==="Hidden Power [")return e.substr(14,e.length-15);if(e.substr(0,13)==="Hidden Power ")return e.substr(13);if(e.substr(0,11)==="hiddenpower")return e.substr(11,1).toUpperCase()+e.substr(12)}function W(e){return e.substr(0,14)==="Hidden Power ["?e:e.substr(0,13)==="Hidden Power "?e.substr(0,13)+"["+e.substr(13)+"]":e.substr(0,11)==="hiddenpower"?"Hidden Power ["+e.substr(11,1).toUpperCase()+e.substr(12)+"]":e}function P(e){return e?e.replace(/[^A-Za-z0-9]+/g,""):""}function T(e,t){if(!e)return"";if(t){let n=t.get(e);if(n!=null&&n.exists)return n.name}return e.replace(/([0-9]+)/g," $1 ").replace(/([A-Z])/g," $1").replace(/[ ][ ]/g," ").trim()}var H={Bug:{ivs:{atk:30,def:30,spd:30},dvs:{atk:13,def:13}},Dark:{ivs:{},dvs:{}},Dragon:{ivs:{atk:30},dvs:{def:14}},Electric:{ivs:{spa:30},dvs:{atk:14}},Fighting:{ivs:{def:30,spa:30,spd:30,spe:30},dvs:{atk:12,def:12}},Fire:{ivs:{atk:30,spa:30,spe:30},dvs:{atk:14,def:12}},Flying:{ivs:{hp:30,atk:30,def:30,spa:30,spd:30},dvs:{atk:12,def:13}},Ghost:{ivs:{def:30,spd:30},dvs:{atk:13,def:14}},Grass:{ivs:{atk:30,spa:30},dvs:{atk:14,def:14}},Ground:{ivs:{spa:30,spd:30},dvs:{atk:12}},Ice:{ivs:{atk:30,def:30},dvs:{def:13}},Poison:{ivs:{def:30,spa:30,spd:30},dvs:{atk:12,def:14}},Psychic:{ivs:{atk:30,spe:30},dvs:{def:12}},Rock:{ivs:{def:30,spd:30,spe:30},dvs:{atk:13,def:12}},Steel:{ivs:{spd:30},dvs:{atk:13}},Water:{ivs:{atk:30,def:30,spa:30},dvs:{atk:14,def:13}}},G=["Fighting","Flying","Poison","Ground","Rock","Bug","Ghost","Steel","Fire","Water","Grass","Electric","Psychic","Ice","Dragon","Dark"];function B(e,t){let n=(i,a=0)=>a?(i>>>0)%2**a:i>>>0,r={hp:31,atk:31,def:31,spe:31,spa:31,spd:31};if(e<=2){let i=n(t.atk/2),a=n(t.def/2),o=n(t.spe/2),p=n(t.spa/2);return{type:G[4*(i%4)+a%4],power:n((5*((p>>3)+2*(o>>3)+4*(a>>3)+8*(i>>3))+p%4)/2+31)}}else{let i=0,a=0,o=1;for(let p in r)i+=o*(t[p]%2),a+=o*(n(t[p]/2)%2),o*=2;return{type:G[n(i*15/63)],power:e<6?n(a*40/63)+30:60}}}function M(e,t){let n=H[e];if(n)return(t==null?void 0:t.gen)===2?Z(n.dvs):n.ivs}function Z(e){let t={},n;for(n in e)t[n]=N(e[n]);return t}function D(e){return Math.floor(e/2)}function N(e){return e*2+1}function X(e){return D(e.atk===void 0?31:e.atk)%2*8+D(e.def===void 0?31:e.def)%2*4+D(e.spe===void 0?31:e.spe)%2*2+D(e.spa===void 0?31:e.spa)%2}var k=(e,t=0)=>t?(e>>>0)%2**t:e>>>0;function q(e,t,n,r=31,i,a=100,o){if(i===void 0&&(i=e<3?252:0),e<3&&(r=D(r)*2,o=void 0),t==="hp")return n===1?n:k(k(2*n+r+k(i/4)+100)*a/100+10);{let p=k(k(2*n+r+k(i/4))*a/100+5);if(o!==void 0){if(o.plus===t)return k(k(p*110,16)/100);if(o.minus===t)return k(k(p*90,16)/100)}return p}}var R=9,v=class{constructor(t,n,r,i,a){this.team=t;this.data=n;this.format=r;this.name=i;this.folder=a;this.team=t,this.format=r,this.name=i,this.folder=a,this.data=n,r&&n&&n.forGen&&(r.slice(0,3)==="gen"?this.data=n.forGen(parseInt(r[3])):(this.format=`gen6${r}`,this.data=n.forGen(6)))}get gen(){var t;return(t=this.data)==null?void 0:t.gen}pack(){return h.packTeam(this)}static unpack(t,n){return h.unpackTeam(t,n)}export(t){let n="";for(let r of this.team)n+=S.exportSet(r,t||this.data);return n}static import(t,n){return h.importTeam(t,n)}toString(t){return this.export(t)}static fromString(t,n){let r=h.importTeams(t,n,!0,!0);return r.length?r[0]:void 0}toJSON(){return JSON.stringify(this.team)}static fromJSON(t){if(t.charAt(0)!=="["||t.charAt(t.length-1)!=="]")return;let n=JSON.parse(t);return new v(n)}static canonicalize(t,n){let r,i=[];for(let a of t){let o=S.canonicalize(a,n);r?i.push([o.species,o]):r=o}return[r,...i.sort((a,o)=>a[0].localeCompare(o[0])).map(([,a])=>a)]}},h=new class{packTeam(e){let t="";for(let n of e.team)t&&(t+="]"),t+=S.packSet(n);return t}unpackTeam(e,t){if(!e)return;if(e.charAt(0)==="["&&e.charAt(e.length-1)==="]")return v.fromJSON(e);let n=[],r=0,i=0;for(let a=0;a<24;a++){let o=w(e,r,i,t);if(!o.set)return;if(n.push(o.set),r=o.i,i=o.j,i<0)break;r=i+1}return new v(n,t)}importTeam(e,t){let n=h.importTeams(e,t,!0);return n.length?n[0]:void 0}importTeams(e,t,n,r){let i=e.split(`
`);if(i.length===1||i.length===2&&!i[1]){let s=r?E(i[0],t):h.unpackTeam(i[0],t);return s?[s]:[]}let a=[],o=-1,p=[];for(let s=0;s<i.length;s++){let f=i[s].trim();if(f.substr(0,3)==="==="){if(n&&a.length)return a;p=[],f=f.substr(3,f.length-6).trim();let u=`gen${(t==null?void 0:t.gen)||R}`,d=f.indexOf("]");d>=0&&(u=f.substr(1,d-1),f=f.substr(d+1).trim());let m=f.lastIndexOf("/"),g="";m>0&&(g=f.slice(0,m),f=f.slice(m+1)),a.push(new v(p,t,u,f,g))}else if(f.includes("|")){let u=E(f,t);u&&a.push(u)}else if(o!==s){let u=A(i,s,t);if(u.set&&p.push(u.set),u.line===s)continue;o=u.line,s=o-1}}return p.length&&!a.length&&a.push(new v(p,t)),a}exportTeams(e,t){let n="",r=0;for(let i of e)n+="=== "+(i.format?"["+i.format.toString()+"] ":"")+(i.folder?""+i.folder+"/":"")+(i.name||"Untitled "+ ++r)+` ===

`,n+=i.export(t),n+=`
`;return n}toString(e,t){return h.exportTeams(e,t)}fromString(e,t){return h.importTeams(e,t,!1,!0)}};function E(e,t){let n=e.indexOf("|");if(n<0)return;let r=e.indexOf("]");r>n&&(r=-1);let i=e.lastIndexOf("/",n);i<0&&(i=r);let a=r>0?e.slice(0,r):`gen${(t==null?void 0:t.gen)||R}`,o=h.unpackTeam(e.slice(n+1),t);return o&&new v(o.team,t,a,e.slice(i+1,n),e.slice(r+1,i>0?i:r+1))}return z(K);})();