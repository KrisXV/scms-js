function _defineProperties(e,s){for(var t=0;t<s.length;t++){var i=s[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,s,t){return s&&_defineProperties(e.prototype,s),t&&_defineProperties(e,t),e}!function(){"use strict";var e={};function s(e){return"string"!=typeof e&&"number"!=typeof e?"":(""+e).toLowerCase().replace(/[^a-z0-9]+/g,"")}e.toID=s;var t={hp:"HP",atk:"Atk",def:"Def",spa:"SpA",spd:"SpD",spe:"Spe"},i=Object.keys(t),n={HP:"hp",hp:"hp",Attack:"atk",Atk:"atk",atk:"atk",Defense:"def",Def:"def",def:"def","Special Attack":"spa",SpA:"spa",SAtk:"spa",SpAtk:"spa",spa:"spa",Special:"spa",spc:"spa",Spc:"spa","Special Defense":"spd",SpD:"spd",SDef:"spd",SpDef:"spd",spd:"spd",Speed:"spe",Spe:"spe",Spd:"spe",spe:"spe"};e.Sets=new(function(){function n(){}var r=n.prototype;return r.pack=function(s){return e.Sets.packSet(s)},r.packSet=function(e){var t="";t+=e.name||e.species;var i=s(e.species);t+="|"+(s(e.name||e.species)===i?"":i),t+="|"+s(e.item),t+="|"+(s(e.ability)||"-");var n="";if(t+="|",e.moves)for(var r=0;r<e.moves.length;r++){var a=s(e.moves[r]);r&&!a||(t+=(r?",":"")+a,"hiddenpower"===a.substr(0,11)&&a.length>11&&(n=a.slice(11)))}t+="|"+(e.nature||"");var u="|";e.evs&&(u="|"+(e.evs.hp||"")+","+(e.evs.atk||"")+","+(e.evs.def||"")+","+(e.evs.spa||"")+","+(e.evs.spd||"")+","+(e.evs.spe||"")),t+="|,,,,,"===u?"|":u,e.gender?t+="|"+e.gender:t+="|";var p=function(s){return 31===e.ivs[s]||void 0===e.ivs[s]?"":e.ivs[s].toString()},v="|";return e.ivs&&(v="|"+p("hp")+","+p("atk")+","+p("def")+","+p("spa")+","+p("spd")+","+p("spe")),t+="|,,,,,"===v?"|":v,e.shiny?t+="|S":t+="|",e.level&&100!==e.level?t+="|"+e.level:t+="|",void 0!==e.happiness&&255!==e.happiness?t+="|"+e.happiness:t+="|",(e.pokeball||e.hpType&&s(e.hpType)!==n||e.gigantamax)&&(t+=","+(e.hpType||""),t+=","+s(e.pokeball),t+=","+(e.gigantamax?"G":"")),t},r.exportSet=function(e,s){var n,r,a,u,p,f,l,m,c="",h=e.species||e.name;(h=null!==(r=null===(n=null==s?void 0:s.getSpecies(h||name))||void 0===n?void 0:n.name)&&void 0!==r?r:h,e.name&&e.name!==h?c+=e.name+" ("+h+")":c+=""+h,(!s||s.gen>=2)&&("M"===e.gender&&(c+=" (M)"),"F"===e.gender&&(c+=" (F)")),e.item)&&(c+=" @ "+(null!==(u=null===(a=null==s?void 0:s.getItem(e.item))||void 0===a?void 0:a.name)&&void 0!==u?u:e.item));(c+="  \n",e.ability&&(!s||(null==s?void 0:s.gen)>=3))&&(c+="Ability: "+(null!==(f=null===(p=null==s?void 0:s.getAbility(e.ability))||void 0===p?void 0:p.name)&&void 0!==f?f:e.ability)+"  \n");e.level&&100!==e.level&&(c+="Level: "+e.level+"  \n"),e.shiny&&(!s||s.gen>=2)&&(c+="Shiny: Yes  \n"),"number"!=typeof e.happiness||255===e.happiness||isNaN(e.happiness)||s&&!(s.gen>=2)||(c+="Happiness: "+e.happiness+"  \n"),e.pokeball&&(c+="Pokeball: "+e.pokeball+"  \n"),e.hpType&&(c+="Hidden Power: "+e.hpType+"  \n"),e.gigantamax&&(c+="Gigantamax: Yes  \n");var g=!0;if(e.evs&&(!s||s.gen>=3))for(var b=0;b<i.length;b++){var k=i[b];e.evs[k]&&(g?(c+="EVs: ",g=!1):c+=" / ",c+=e.evs[k]+" "+t[k])}if(g||(c+="  \n"),e.nature&&(!s||s.gen>=3)&&(c+=e.nature+" Nature  \n"),g=!0,e.ivs){var S=!0,x=void 0;if(e.moves)for(var y=0,T=e.moves;y<T.length;y++){if(x=v(T[y])){var O=d(x,s);if(!O)continue;for(var N=0;N<i.length;N++){var w=i[N];if((void 0===e.ivs[w]?31:e.ivs[w])!==(O[w]||31)){S=!1;break}}}}if(S&&!x)for(var P=0;P<i.length;P++){var A=i[P];if(31!==e.ivs[A]&&void 0!==e.ivs[A]){S=!1;break}}if(!S)for(var j=0;j<i.length;j++){var H=i[j];void 0===e.ivs[H]||isNaN(e.ivs[H])||31===e.ivs[H]||(g?(c+="IVs: ",g=!1):c+=" / ",c+=e.ivs[H]+" "+t[H])}}if(g||(c+="  \n"),e.moves)for(var I=0,D=e.moves;I<D.length;I++){var G=D[I];G&&(c+="- "+o(G=null!==(m=null===(l=null==s?void 0:s.getMove(G))||void 0===l?void 0:l.name)&&void 0!==m?m:G)+"  \n")}return c+="\n"},r.unpack=function(s,t){return e.Sets.unpackSet(s,t)},r.unpackSet=function(e,s){return a(e,0,0,s).set},r.importSet=function(e,s){return p(e.split("\n"),0,s).set},r.toJSON=function(e){return JSON.stringify(e)},r.fromJSON=function(e){if("{"===e.charAt(0)&&"}"===e.charAt(e.length-1))return JSON.parse(e)},r.toString=function(s,t){return e.Sets.exportSet(s,t)},r.fromString=function(s){return e.Sets.importSet(s)},n}());var r=["","0","1","H","S"];function a(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,n={};if((t=e.indexOf("|",s))<0)return{i:s,j:t};if(n.name=e.substring(s,t),s=t+1,(t=e.indexOf("|",s))<0)return{i:s,j:t};if(n.species=e.substring(s,t)||n.name,s=t+1,(t=e.indexOf("|",s))<0)return{i:s,j:t};if(n.item=e.substring(s,t),s=t+1,(t=e.indexOf("|",s))<0)return{i:s,j:t};var a,u=e.substring(s,t);if("-"===u)u="";else if(r.includes(u)){if(i){var p=i.getSpecies(n.species);"Zygarde"===(null==p?void 0:p.baseSpecies)&&"H"===u?u="Power Construct":(null==p?void 0:p.abilities)&&(u=p.abilities[u||"0"])}if(""!==u&&!u)return{i:s,j:t}}if(n.ability=u,s=t+1,(t=e.indexOf("|",s))<0)return{i:s,j:t};if(n.moves=e.substring(s,t).split(",",24).filter((function(e){return e})),s=t+1,(t=e.indexOf("|",s))<0)return{i:s,j:t};if(n.nature=e.substring(s,t),s=t+1,(t=e.indexOf("|",s))<0)return{i:s,j:t};if(n.evs={hp:0,atk:0,def:0,spa:0,spd:0,spe:0},t!==s){var v=e.substring(s,t);if(v.length>5){var o=v.split(",");n.evs.hp=Number(o[0])||n.evs.hp,n.evs.atk=Number(o[1])||n.evs.atk,n.evs.def=Number(o[2])||n.evs.def,n.evs.spa=Number(o[3])||n.evs.spa,n.evs.spd=Number(o[4])||n.evs.spd,n.evs.spe=Number(o[5])||n.evs.spe}}if(s=t+1,(t=e.indexOf("|",s))<0)return{i:s,j:t};if(s!==t&&(n.gender=e.substring(s,t)),s=t+1,(t=e.indexOf("|",s))<0)return{i:s,j:t};if(n.ivs={hp:31,atk:31,def:31,spa:31,spd:31,spe:31},t!==s){var f=e.substring(s,t).split(",",6);n.ivs.hp=""===f[0]?31:Number(f[0])||0,n.ivs.atk=""===f[1]?31:Number(f[1])||0,n.ivs.def=""===f[2]?31:Number(f[2])||0,n.ivs.spa=""===f[3]?31:Number(f[3])||0,n.ivs.spd=""===f[4]?31:Number(f[4])||0,n.ivs.spe=""===f[5]?31:Number(f[5])||0}return s=t+1,(t=e.indexOf("|",s))<0?{i:s,j:t}:(s!==t&&(n.shiny=!0),s=t+1,(t=e.indexOf("|",s))<0?{i:s,j:t}:(s!==t&&(n.level=parseInt(e.substring(s,t))),s=t+1,(t=e.indexOf("]",s))<0?s<e.length&&(a=e.substring(s).split(",",4)):s!==t&&(a=e.substring(s,t).split(",",4)),a&&(n.happiness=a[0]?Number(a[0]):255,n.hpType=a[1],n.pokeball=a[2]?a[2].trim():a[2],n.gigantamax=!!a[3]),{set:n,i:s,j:t}))}e._unpack=a;var u=/^[A-Za-z]+ (N|n)ature/;function p(e){for(var t,i,r,a,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,f=void 0;p<e.length;p++){var l=e[p].trim();if(""===l||"---"===l||"==="===l.substr(0,3)||l.includes("|"))return{set:f,line:p};if(f){if("Trait: "===l.substr(0,7))l=l.substr(7),f.ability=l;else if("Ability: "===l.substr(0,9))l=l.substr(9),f.ability=l;else if("Shiny: Yes"===l)f.shiny=!0;else if("Level: "===l.substr(0,7))l=l.substr(7),f.level=+l;else if("Happiness: "===l.substr(0,11))l=l.substr(11),f.happiness=+l;else if("Pokeball: "===l.substr(0,10))l=l.substr(10),f.pokeball=l;else if("Hidden Power: "===l.substr(0,14))l=l.substr(14),f.hpType=l;else if("Gigantamax: Yes"===l)f.gigantamax=!0;else if("EVs: "===l.substr(0,5)){var m=(l=l.substr(5)).split(" / ");f.evs={hp:0,atk:0,def:0,spa:0,spd:0,spe:0};for(var c=0;c<m.length;c++){var h=m[c],g=h.indexOf(" ");if(-1!==g){var b=n[h.substr(g+1)],k=parseInt(h.substr(0,g));b&&(f.evs[b]=k)}}}else if("IVs: "===l.substr(0,5)){var S=(l=l.substr(5)).split(" / ");f.ivs={hp:31,atk:31,def:31,spa:31,spd:31,spe:31};for(var x=0;x<S.length;x++){var y=S[x],T=y.indexOf(" ");if(-1!==T){var O=n[y.substr(T+1)],N=parseInt(y.substr(0,T));O&&(isNaN(N)&&(N=31),f.ivs[O]=N)}}}else if(u.exec(l)){var w=l.indexOf(" Nature");-1===w&&(w=l.indexOf(" nature")),"undefined"!==(l=l.substr(0,w))&&(f.nature=l)}else if("-"===l.substr(0,1)||"~"===l.substr(0,1)){" "===(l=l.substr(1)).substr(0,1)&&(l=l.substr(1)),f.moves||(f.moves=[]);var P=v(l);if(P){l="Hidden Power "+P.toString();var A=d(P,o);if(!f.ivs&&A){f.ivs={hp:31,atk:31,def:31,spa:31,spd:31,spe:31};var j=void 0;for(j in A)f.ivs[j]=A[j]}}"Frustration"===l&&void 0===f.happiness&&(f.happiness=0),f.moves.push(l)}}else{f={name:"",species:"",gender:""};var H=l.lastIndexOf(" @ ");-1!==H&&(f.item=l.substr(H+3),"noitem"===s(f.item)&&(f.item=""),l=l.substr(0,H))," (M)"===l.substr(l.length-4)&&(f.gender="M",l=l.substr(0,l.length-4))," (F)"===l.substr(l.length-4)&&(f.gender="F",l=l.substr(0,l.length-4));var I=l.lastIndexOf(" (");if(")"===l.substr(l.length-1)&&-1!==I){var D=(l=l.substr(0,l.length-1)).substr(I+2);f.species=null!==(i=null===(t=null==o?void 0:o.getSpecies(D))||void 0===t?void 0:t.name)&&void 0!==i?i:D,l=l.substr(0,I),f.name=l}else f.species=null!==(a=null===(r=null==o?void 0:o.getSpecies(l))||void 0===r?void 0:r.name)&&void 0!==a?a:l,f.name=""}}return{set:f,line:p+1}}function v(e){return"Hidden Power ["===e.substr(0,14)?e.substr(14,e.length-15):"Hidden Power "===e.substr(0,13)?e.substr(13):"hiddenpower"===e.substr(0,11)?e.substr(11,1).toUpperCase()+e.substr(12):void 0}function o(e){return"Hidden Power ["===e.substr(0,14)?e:"Hidden Power "===e.substr(0,13)?e.substr(0,13)+"["+e.substr(13)+"]":"hiddenpower"===e.substr(0,11)?"Hidden Power ["+e.substr(11,1).toUpperCase()+e.substr(12)+"]":e}e._import=p;var f={Bug:{ivs:{atk:30,def:30,spd:30},dvs:{atk:13,def:13}},Dark:{ivs:{},dvs:{}},Dragon:{ivs:{atk:30},dvs:{def:14}},Electric:{ivs:{spa:30},dvs:{atk:14}},Fighting:{ivs:{def:30,spa:30,spd:30,spe:30},dvs:{atk:12,def:12}},Fire:{ivs:{atk:30,spa:30,spe:30},dvs:{atk:14,def:12}},Flying:{ivs:{hp:30,atk:30,def:30,spa:30,spd:30},dvs:{atk:12,def:13}},Ghost:{ivs:{def:30,spd:30},dvs:{atk:13,def:14}},Grass:{ivs:{atk:30,spa:30},dvs:{atk:14,def:14}},Ground:{ivs:{spa:30,spd:30},dvs:{atk:12}},Ice:{ivs:{atk:30,def:30},dvs:{def:13}},Poison:{ivs:{def:30,spa:30,spd:30},dvs:{atk:12,def:14}},Psychic:{ivs:{atk:30,spe:30},dvs:{def:12}},Rock:{ivs:{def:30,spd:30,spe:30},dvs:{atk:13,def:12}},Steel:{ivs:{spd:30},dvs:{atk:13}},Water:{ivs:{atk:30,def:30,spa:30},dvs:{atk:14,def:13}}};function d(e,s){var t=f[e];if(t)return 2===(null==s?void 0:s.gen)?function(e){var s,t={};for(s in e)t[s]=2*e[s];return t}(t.dvs):t.ivs}var l=e,m=function(){function s(e,s,t,i,n){this.team=e,this.data=s,this.format=t,this.name=i,this.folder=n,this.team=e,this.format=t,this.name=i,this.folder=n,this.data=s,t&&s&&s.forGen&&("gen"===t.slice(0,3)?this.data=s.forGen(parseInt(t[3])):(this.format="gen6"+t,this.data=s.forGen(6)))}var t=s.prototype;return t.pack=function(){return e.Teams.packTeam(this)},s.unpack=function(s,t){return e.Teams.unpackTeam(s,t)},t.export=function(e){for(var s="",t=0,i=this.team;t<i.length;t++){var n=i[t];s+=l.Sets.exportSet(n,e||this.data)}return s},s.import=function(s,t){return e.Teams.importTeam(s,t)},t.toString=function(e){return this.export(e)},s.fromString=function(s,t){return e.Teams.importTeam(s,t)},t.toJSON=function(){return JSON.stringify(this.team)},s.fromJSON=function(e){if("["===e.charAt(0)&&"]"===e.charAt(e.length-1))return new s(JSON.parse(e))},_createClass(s,[{key:"gen",get:function(){var e;return null===(e=this.data)||void 0===e?void 0:e.gen}}]),s}();function c(s,t){var i=s.indexOf("|");if(!(i<0)){var n=s.indexOf("]");n>i&&(n=-1);var r=s.lastIndexOf("/",i);r<0&&(r=n);var a=n>0?s.slice(0,n):"gen"+((null==t?void 0:t.gen)||8),u=e.Teams.unpackTeam(s.slice(i+1),t);return u?new m(u.team,t,a,s.slice(r+1,i),s.slice(n+1,r>0?r:n+1)):u}}e.Team=m,e.Teams=new(function(){function s(){}var t=s.prototype;return t.packTeam=function(e){for(var s="",t=0,i=e.team;t<i.length;t++){var n=i[t];s&&(s+="]"),s+=l.Sets.packSet(n)}return s},t.unpackTeam=function(e,s){if(e){if("["===e.charAt(0)&&"]"===e.charAt(e.length-1))return m.fromJSON(e);for(var t=[],i=0,n=0,r=0;r<24;r++){var a=l._unpack(e,i,n,s);if(!a.set)return;if(t.push(a.set),i=a.i,(n=a.j)<0)break;i=n+1}return new m(t,s)}},t.importTeam=function(s,t){var i=e.Teams.importTeams(s,t,!0);return i.length?i[0]:void 0},t.importTeams=function(s,t,i){var n=s.split("\n");if(1===n.length||2===n.length&&!n[1]){var r=e.Teams.unpackTeam(n[0],t);return r?[r]:[]}for(var a=[],u=-1,p=[],v=0;v<n.length;v++){var o=n[v].trim();if("==="===o.substr(0,3)){if(i&&a.length)return a;p=[],o=o.substr(3,o.length-6).trim();var f="gen"+((null==t?void 0:t.gen)||8),d=o.indexOf("]");d>=0&&(f=o.substr(1,d-1),o=o.substr(d+1).trim());var h=o.lastIndexOf("/"),g="";h>0&&(g=o.slice(0,h),o=o.slice(h+1)),a.push(new m(p,t,f,o,g))}else if(o.includes("|")){var b=c(o,t);b&&a.push(b)}else if(u!==v){var k=l._import(n,v,t);if(k.set&&p.push(k.set),k.line===v)continue;v=(u=k.line)-1}}return p.length&&!a.length&&a.push(new m(p,t)),a},t.exportTeams=function(e,s){for(var t="",i=0,n=0;n<e.length;n++){var r=e[n];t+="=== "+(r.format?"["+r.format.toString()+"] ":"")+(r.folder?r.folder+"/":"")+(r.name||"Untitled "+ ++i)+" ===\n\n",t+=r.export(s),t+="\n"}return t},t.toString=function(s,t){return e.Teams.exportTeams(s,t)},t.fromString=function(s,t){return e.Teams.importTeams(s,t)},s}()),window.PokemonSets=e.Sets,window.PokemonTeams=e.Teams}();